# System Architecture - Chess ML Application

## ­ЪЈЌ№ИЈ High-Level Architecture

```
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ                     CHESS ML APPLICATION                         Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                              Рћѓ
                              Рќ╝
        РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
        Рћѓ         USER INTERFACE (Cell 8)         Рћѓ
        Рћѓ  Рђб Interactive Chess Board (ipywidgets) Рћѓ
        Рћѓ  Рђб Move Input & Validation              Рћѓ
        Рћѓ  Рђб Game State Display                   Рћѓ
        РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                              Рћѓ
                              Рќ╝
        РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
        Рћѓ       GAME ENGINE (Minimax + ╬▒-╬▓)       Рћѓ
        Рћѓ  Рђб Search Algorithm (depth 2-5)         Рћѓ
        Рћѓ  Рђб Move Ordering & Pruning              Рћѓ
        Рћѓ  Рђб Best Move Selection                  Рћѓ
        РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                              Рћѓ
                              Рќ╝
        РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
        Рћѓ      EVALUATION DISPATCHER              Рћѓ
        Рћѓ  Рђб Checks ML_MODEL_AVAILABLE flag       Рћѓ
        Рћѓ  Рђб Routes to ML or Traditional          Рћѓ
        РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                              Рћѓ
                РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћ┤РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
                Рќ╝                           Рќ╝
    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ   РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
    Рћѓ   ML EVALUATION       Рћѓ   Рћѓ TRADITIONAL EVAL      Рћѓ
    Рћѓ  Рђб Load Model (Cell 7)Рћѓ   Рћѓ Рђб Piece Values        Рћѓ
    Рћѓ  Рђб FEN Рєњ Features     Рћѓ   Рћѓ Рђб Piece-Square Tables Рћѓ
    Рћѓ  Рђб Neural Network     Рћѓ   Рћѓ Рђб Material Count      Рћѓ
    Рћѓ  Рђб Return Score       Рћѓ   Рћѓ Рђб Return Score        Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў   РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                Рћѓ
                Рќ╝
    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
    Рћѓ  TRAINED MODEL        Рћѓ
    Рћѓ  (Cells 1-6)          Рћѓ
    Рћѓ  Рђб Data Loading       Рћѓ
    Рћѓ  Рђб Feature Extraction Рћѓ
    Рћѓ  Рђб Model Training     Рћѓ
    Рћѓ  Рђб Model Saving       Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
                Рћѓ
                Рќ╝
    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
    Рћѓ  DATASET              Рћѓ
    Рћѓ  chessData.csv        Рћѓ
    Рћѓ  Рђб 13M positions      Рћѓ
    Рћѓ  Рђб FEN + Evaluations  Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
```

---

## ­Ъћё Data Flow

### Training Phase (Cells 1-6)

```
chessData.csv (500k positions)
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Load Dataset     Рћѓ  Cell 1
Рћѓ  (pandas)         Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  FEN Рєњ Features   Рћѓ  Cell 2-3
Рћѓ  (774 dimensions) Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Normalize &      Рћѓ  Cell 3
Рћѓ  Train/Test Split Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Build Neural Net Рћѓ  Cell 4
Рћѓ  (4 hidden layers)Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Train Model      Рћѓ  Cell 5
Рћѓ  (20 epochs)      Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Evaluate & Save  Рћѓ  Cell 6
Рћѓ  Рђб model.h5       Рћѓ
Рћѓ  Рђб scaler.pkl     Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
```

### Inference Phase (Cell 8-9)

```
User Makes Move
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Update Board     Рћѓ
Рћѓ  State            Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  AI Turn?         Рћѓ
Рћѓ  (Minimax Search) Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Generate Legal   Рћѓ
Рћѓ  Moves            Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  For Each Move:   Рћѓ
Рћѓ  Evaluate PositionРћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Board Рєњ FEN      Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  FEN Рєњ Features   Рћѓ
Рћѓ  (774 dims)       Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Normalize        Рћѓ
Рћѓ  (StandardScaler) Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Neural Network   Рћѓ
Рћѓ  Prediction       Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Return Score     Рћѓ
Рћѓ  (centipawns)     Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Select Best Move Рћѓ
Рћѓ  (highest score)  Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
        Рћѓ
        Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Execute Move     Рћѓ
Рћѓ  Update Display   Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
```

---

## ­ЪДа Neural Network Architecture

```
INPUT LAYER (774 neurons)
    Рћѓ
    Рћѓ  [Board State: 768]
    Рћѓ  [Side to Move: 1]
    Рћѓ  [Castling Rights: 4]
    Рћѓ  [En Passant: 1]
    Рћѓ
    Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  DENSE LAYER 1      Рћѓ
Рћѓ  512 neurons        Рћѓ
Рћѓ  ReLU activation    Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
    Рћѓ
    Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  DROPOUT (0.3)      Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
    Рћѓ
    Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  DENSE LAYER 2      Рћѓ
Рћѓ  256 neurons        Рћѓ
Рћѓ  ReLU activation    Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
    Рћѓ
    Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  DROPOUT (0.3)      Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
    Рћѓ
    Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  DENSE LAYER 3      Рћѓ
Рћѓ  128 neurons        Рћѓ
Рћѓ  ReLU activation    Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
    Рћѓ
    Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  DROPOUT (0.2)      Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
    Рћѓ
    Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  DENSE LAYER 4      Рћѓ
Рћѓ  64 neurons         Рћѓ
Рћѓ  ReLU activation    Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
    Рћѓ
    Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  OUTPUT LAYER       Рћѓ
Рћѓ  1 neuron           Рћѓ
Рћѓ  Linear activation  Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
    Рћѓ
    Рќ╝
EVALUATION SCORE (centipawns)
```

**Total Parameters**: 595,713
- Layer 1: 774 ├Ќ 512 + 512 = 396,800
- Layer 2: 512 ├Ќ 256 + 256 = 131,328
- Layer 3: 256 ├Ќ 128 + 128 = 32,896
- Layer 4: 128 ├Ќ 64 + 64 = 8,256
- Output: 64 ├Ќ 1 + 1 = 65

---

## ­Ъј» Feature Engineering

### Board Representation (768 features)

```
For each of 64 squares:
    12 binary features (one-hot encoding)
    
    [0] White Pawn
    [1] White Knight
    [2] White Bishop
    [3] White Rook
    [4] White Queen
    [5] White King
    [6] Black Pawn
    [7] Black Knight
    [8] Black Bishop
    [9] Black Rook
    [10] Black Queen
    [11] Black King

Example: White Knight on e4
    Square 28 (e4): [0,1,0,0,0,0,0,0,0,0,0,0]
    All other squares: [0,0,0,0,0,0,0,0,0,0,0,0]
```

### Additional Features (6 features)

```
[768] Side to Move:           0 = White, 1 = Black
[769] White Kingside Castle:  0 = No, 1 = Yes
[770] White Queenside Castle: 0 = No, 1 = Yes
[771] Black Kingside Castle:  0 = No, 1 = Yes
[772] Black Queenside Castle: 0 = No, 1 = Yes
[773] En Passant Available:   0 = No, 1 = Yes
```

---

## ­Ъћђ Evaluation Function Flow

```
evaluate_board(board)
        Рћѓ
        Рќ╝
    Is game over?
        Рћѓ
    РћїРћђРћђРћђРћ┤РћђРћђРћђРћљ
    Рћѓ       Рћѓ
   Yes      No
    Рћѓ       Рћѓ
    Рќ╝       Рќ╝
Return   ML Available?
┬▒10000      Рћѓ
        РћїРћђРћђРћђРћ┤РћђРћђРћђРћљ
        Рћѓ       Рћѓ
       Yes      No
        Рћѓ       Рћѓ
        Рќ╝       Рќ╝
    ML Eval  Traditional
        Рћѓ       Eval
        Рћѓ       Рћѓ
        РћћРћђРћђРћђРћгРћђРћђРћђРћў
            Рћѓ
            Рќ╝
    Return Score
    (centipawns)
```

---

## ­Ъј« Game Loop

```
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Initialize Game                    Рћѓ
Рћѓ  Рђб Create Board                     Рћѓ
Рћѓ  Рђб Set AI Color & Depth             Рћѓ
Рћѓ  Рђб Load ML Model (if available)     Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
            Рћѓ
            Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Wait for User Input                Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
            Рћѓ
            Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  User Clicks Square                 Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
            Рћѓ
            Рќ╝
    Is piece selected?
            Рћѓ
        РћїРћђРћђРћђРћ┤РћђРћђРћђРћљ
        Рћѓ       Рћѓ
       No      Yes
        Рћѓ       Рћѓ
        Рќ╝       Рќ╝
    Select   Move to
    Piece    Square
        Рћѓ       Рћѓ
        РћћРћђРћђРћђРћгРћђРћђРћђРћў
            Рћѓ
            Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Validate & Execute Move            Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
            Рћѓ
            Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Update Board Display               Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
            Рћѓ
            Рќ╝
    Is game over?
            Рћѓ
        РћїРћђРћђРћђРћ┤РћђРћђРћђРћљ
        Рћѓ       Рћѓ
       Yes      No
        Рћѓ       Рћѓ
        Рќ╝       Рќ╝
    Show    AI Turn?
    Result      Рћѓ
            РћїРћђРћђРћђРћ┤РћђРћђРћђРћљ
            Рћѓ       Рћѓ
           Yes      No
            Рћѓ       Рћѓ
            Рќ╝       Рћѓ
    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ   Рћѓ
    Рћѓ  Minimax  Рћѓ   Рћѓ
    Рћѓ  Search   Рћѓ   Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў   Рћѓ
            Рћѓ       Рћѓ
            Рќ╝       Рћѓ
    РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ   Рћѓ
    Рћѓ  Execute  Рћѓ   Рћѓ
    Рћѓ  AI Move  Рћѓ   Рћѓ
    РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў   Рћѓ
            Рћѓ       Рћѓ
            РћћРћђРћђРћђРћгРћђРћђРћђРћў
                Рћѓ
                Рќ╝
        Loop back to
        Wait for Input
```

---

## ­ЪЊд Module Dependencies

```
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Python Standard Library            Рћѓ
Рћѓ  Рђб math, dataclasses, typing, os    Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
            Рћѓ
            Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Data Processing                    Рћѓ
Рћѓ  Рђб pandas (data loading)            Рћѓ
Рћѓ  Рђб numpy (array operations)         Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
            Рћѓ
            Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Machine Learning                   Рћѓ
Рћѓ  Рђб tensorflow/keras (model)         Рћѓ
Рћѓ  Рђб scikit-learn (preprocessing)     Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
            Рћѓ
            Рќ╝
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ  Chess & UI                         Рћѓ
Рћѓ  Рђб chess (game logic)               Рћѓ
Рћѓ  Рђб ipywidgets (interface)           Рћѓ
Рћѓ  Рђб IPython.display (rendering)      Рћѓ
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
```

---

## ­ЪћД Key Components

### 1. Feature Extractor
- **Function**: `fen_to_features(fen_string)`
- **Input**: FEN string
- **Output**: 774-dimensional numpy array
- **Purpose**: Convert chess position to ML-ready format

### 2. ML Evaluator
- **Function**: `evaluate_board_ml(board)`
- **Input**: chess.Board object
- **Output**: Integer (centipawns)
- **Purpose**: Use neural network for position evaluation

### 3. Traditional Evaluator
- **Function**: `evaluate_board_raw(board)`
- **Input**: chess.Board object
- **Output**: Integer (centipawns)
- **Purpose**: Fallback evaluation using piece-square tables

### 4. Unified Evaluator
- **Function**: `evaluate_board(board)`
- **Input**: chess.Board object
- **Output**: Integer (centipawns)
- **Purpose**: Route to ML or traditional evaluation

### 5. Search Algorithm
- **Function**: `minimax(board, depth, alpha, beta, ai_color)`
- **Input**: Board state, search parameters
- **Output**: (score, best_move)
- **Purpose**: Find optimal move using minimax with ╬▒-╬▓ pruning

### 6. Move Selector
- **Function**: `best_move(board, depth, ai_color)`
- **Input**: Board state, search depth, AI color
- **Output**: chess.Move object
- **Purpose**: Return the best move for AI

### 7. UI Manager
- **Class**: `ChessApp`
- **Purpose**: Handle user interaction and display
- **Methods**: 
  - `_render_board()`: Update visual display
  - `_play_human_move()`: Process user moves
  - `on_start()`: Initialize new game
  - `on_undo()`: Take back moves

---

## ­ЪњЙ File Structure

```
Assignment 2/
Рћѓ
РћюРћђРћђ archive/
Рћѓ   РћћРћђРћђ chessData.csv              (13M positions)
Рћѓ
РћюРћђРћђ Chess_Minimax.ipynb            (main application)
Рћѓ   РћюРћђРћђ Cell 0: Package installation
Рћѓ   РћюРћђРћђ Cell 1: Data loading
Рћѓ   РћюРћђРћђ Cell 2: Feature extraction
Рћѓ   РћюРћђРћђ Cell 3: Data preprocessing
Рћѓ   РћюРћђРћђ Cell 4: Model architecture
Рћѓ   РћюРћђРћђ Cell 5: Model training
Рћѓ   РћюРћђРћђ Cell 6: Model evaluation
Рћѓ   РћюРћђРћђ Cell 7: Model loading
Рћѓ   РћюРћђРћђ Cell 8: Chess application
Рћѓ   РћћРћђРћђ Cells 10-11: Testing
Рћѓ
РћюРћђРћђ chess_eval_model.h5            (trained model, ~50MB)
РћюРћђРћђ chess_eval_scaler.pkl          (feature scaler, ~10KB)
Рћѓ
РћћРћђРћђ Documentation/
    РћюРћђРћђ README.md
    РћюРћђРћђ QUICK_START.md
    РћюРћђРћђ IMPLEMENTATION_SUMMARY.md
    РћюРћђРћђ EXECUTION_INSTRUCTIONS.md
    РћћРћђРћђ ARCHITECTURE.md            (this file)
```

---

## ­Ъј» Design Principles

1. **Modularity**: Separate concerns (UI, engine, evaluation, ML)
2. **Fallback System**: Graceful degradation if ML unavailable
3. **Clean Interfaces**: Simple function signatures
4. **Error Handling**: Try-except blocks for robustness
5. **User Feedback**: Clear status messages and indicators
6. **Performance**: Efficient feature extraction and caching
7. **Extensibility**: Easy to add new evaluation methods

---

This architecture provides a robust, maintainable, and extensible chess application with machine learning integration.

# System Architecture - Chess ML Application

## ğŸ—ï¸ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CHESS ML APPLICATION                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         USER INTERFACE (Cell 8)         â”‚
        â”‚  â€¢ Interactive Chess Board (ipywidgets) â”‚
        â”‚  â€¢ Move Input & Validation              â”‚
        â”‚  â€¢ Game State Display                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚       GAME ENGINE (Minimax + Î±-Î²)       â”‚
        â”‚  â€¢ Search Algorithm (depth 2-5)         â”‚
        â”‚  â€¢ Move Ordering & Pruning              â”‚
        â”‚  â€¢ Best Move Selection                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      EVALUATION DISPATCHER              â”‚
        â”‚  â€¢ Checks ML_MODEL_AVAILABLE flag       â”‚
        â”‚  â€¢ Routes to ML or Traditional          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ML EVALUATION       â”‚   â”‚ TRADITIONAL EVAL      â”‚
    â”‚  â€¢ Load Model (Cell 7)â”‚   â”‚ â€¢ Piece Values        â”‚
    â”‚  â€¢ FEN â†’ Features     â”‚   â”‚ â€¢ Piece-Square Tables â”‚
    â”‚  â€¢ Neural Network     â”‚   â”‚ â€¢ Material Count      â”‚
    â”‚  â€¢ Return Score       â”‚   â”‚ â€¢ Return Score        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  TRAINED MODEL        â”‚
    â”‚  (Cells 1-6)          â”‚
    â”‚  â€¢ Data Loading       â”‚
    â”‚  â€¢ Feature Extraction â”‚
    â”‚  â€¢ Model Training     â”‚
    â”‚  â€¢ Model Saving       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  DATASET              â”‚
    â”‚  chessData.csv        â”‚
    â”‚  â€¢ 13M positions      â”‚
    â”‚  â€¢ FEN + Evaluations  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow

### Training Phase (Cells 1-6)

```
chessData.csv (500k positions)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Load Dataset     â”‚  Cell 1
â”‚  (pandas)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FEN â†’ Features   â”‚  Cell 2-3
â”‚  (774 dimensions) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Normalize &      â”‚  Cell 3
â”‚  Train/Test Split â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Build Neural Net â”‚  Cell 4
â”‚  (4 hidden layers)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Train Model      â”‚  Cell 5
â”‚  (20 epochs)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Evaluate & Save  â”‚  Cell 6
â”‚  â€¢ model.h5       â”‚
â”‚  â€¢ scaler.pkl     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Inference Phase (Cell 8-9)

```
User Makes Move
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Update Board     â”‚
â”‚  State            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Turn?         â”‚
â”‚  (Minimax Search) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Generate Legal   â”‚
â”‚  Moves            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  For Each Move:   â”‚
â”‚  Evaluate Positionâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Board â†’ FEN      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FEN â†’ Features   â”‚
â”‚  (774 dims)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Normalize        â”‚
â”‚  (StandardScaler) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Neural Network   â”‚
â”‚  Prediction       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Return Score     â”‚
â”‚  (centipawns)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Select Best Move â”‚
â”‚  (highest score)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Execute Move     â”‚
â”‚  Update Display   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§  Neural Network Architecture

```
INPUT LAYER (774 neurons)
    â”‚
    â”‚  [Board State: 768]
    â”‚  [Side to Move: 1]
    â”‚  [Castling Rights: 4]
    â”‚  [En Passant: 1]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DENSE LAYER 1      â”‚
â”‚  512 neurons        â”‚
â”‚  ReLU activation    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DROPOUT (0.3)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DENSE LAYER 2      â”‚
â”‚  256 neurons        â”‚
â”‚  ReLU activation    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DROPOUT (0.3)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DENSE LAYER 3      â”‚
â”‚  128 neurons        â”‚
â”‚  ReLU activation    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DROPOUT (0.2)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DENSE LAYER 4      â”‚
â”‚  64 neurons         â”‚
â”‚  ReLU activation    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OUTPUT LAYER       â”‚
â”‚  1 neuron           â”‚
â”‚  Linear activation  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
EVALUATION SCORE (centipawns)
```

**Total Parameters**: 595,713
- Layer 1: 774 Ã— 512 + 512 = 396,800
- Layer 2: 512 Ã— 256 + 256 = 131,328
- Layer 3: 256 Ã— 128 + 128 = 32,896
- Layer 4: 128 Ã— 64 + 64 = 8,256
- Output: 64 Ã— 1 + 1 = 65

---

## ğŸ¯ Feature Engineering

### Board Representation (768 features)

```
For each of 64 squares:
    12 binary features (one-hot encoding)
    
    [0] White Pawn
    [1] White Knight
    [2] White Bishop
    [3] White Rook
    [4] White Queen
    [5] White King
    [6] Black Pawn
    [7] Black Knight
    [8] Black Bishop
    [9] Black Rook
    [10] Black Queen
    [11] Black King

Example: White Knight on e4
    Square 28 (e4): [0,1,0,0,0,0,0,0,0,0,0,0]
    All other squares: [0,0,0,0,0,0,0,0,0,0,0,0]
```

### Additional Features (6 features)

```
[768] Side to Move:           0 = White, 1 = Black
[769] White Kingside Castle:  0 = No, 1 = Yes
[770] White Queenside Castle: 0 = No, 1 = Yes
[771] Black Kingside Castle:  0 = No, 1 = Yes
[772] Black Queenside Castle: 0 = No, 1 = Yes
[773] En Passant Available:   0 = No, 1 = Yes
```

---

## ğŸ”€ Evaluation Function Flow

```
evaluate_board(board)
        â”‚
        â–¼
    Is game over?
        â”‚
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”
    â”‚       â”‚
   Yes      No
    â”‚       â”‚
    â–¼       â–¼
Return   ML Available?
Â±10000      â”‚
        â”Œâ”€â”€â”€â”´â”€â”€â”€â”
        â”‚       â”‚
       Yes      No
        â”‚       â”‚
        â–¼       â–¼
    ML Eval  Traditional
        â”‚       Eval
        â”‚       â”‚
        â””â”€â”€â”€â”¬â”€â”€â”€â”˜
            â”‚
            â–¼
    Return Score
    (centipawns)
```

---

## ğŸ® Game Loop

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Initialize Game                    â”‚
â”‚  â€¢ Create Board                     â”‚
â”‚  â€¢ Set AI Color & Depth             â”‚
â”‚  â€¢ Load ML Model (if available)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Wait for User Input                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Clicks Square                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    Is piece selected?
            â”‚
        â”Œâ”€â”€â”€â”´â”€â”€â”€â”
        â”‚       â”‚
       No      Yes
        â”‚       â”‚
        â–¼       â–¼
    Select   Move to
    Piece    Square
        â”‚       â”‚
        â””â”€â”€â”€â”¬â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Validate & Execute Move            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Update Board Display               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
    Is game over?
            â”‚
        â”Œâ”€â”€â”€â”´â”€â”€â”€â”
        â”‚       â”‚
       Yes      No
        â”‚       â”‚
        â–¼       â–¼
    Show    AI Turn?
    Result      â”‚
            â”Œâ”€â”€â”€â”´â”€â”€â”€â”
            â”‚       â”‚
           Yes      No
            â”‚       â”‚
            â–¼       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  Minimax  â”‚   â”‚
    â”‚  Search   â”‚   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
            â”‚       â”‚
            â–¼       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  Execute  â”‚   â”‚
    â”‚  AI Move  â”‚   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
            â”‚       â”‚
            â””â”€â”€â”€â”¬â”€â”€â”€â”˜
                â”‚
                â–¼
        Loop back to
        Wait for Input
```

---

## ğŸ“¦ Module Dependencies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Python Standard Library            â”‚
â”‚  â€¢ math, dataclasses, typing, os    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Processing                    â”‚
â”‚  â€¢ pandas (data loading)            â”‚
â”‚  â€¢ numpy (array operations)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Machine Learning                   â”‚
â”‚  â€¢ tensorflow/keras (model)         â”‚
â”‚  â€¢ scikit-learn (preprocessing)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Chess & UI                         â”‚
â”‚  â€¢ chess (game logic)               â”‚
â”‚  â€¢ ipywidgets (interface)           â”‚
â”‚  â€¢ IPython.display (rendering)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Key Components

### 1. Feature Extractor
- **Function**: `fen_to_features(fen_string)`
- **Input**: FEN string
- **Output**: 774-dimensional numpy array
- **Purpose**: Convert chess position to ML-ready format

### 2. ML Evaluator
- **Function**: `evaluate_board_ml(board)`
- **Input**: chess.Board object
- **Output**: Integer (centipawns)
- **Purpose**: Use neural network for position evaluation

### 3. Traditional Evaluator
- **Function**: `evaluate_board_raw(board)`
- **Input**: chess.Board object
- **Output**: Integer (centipawns)
- **Purpose**: Fallback evaluation using piece-square tables

### 4. Unified Evaluator
- **Function**: `evaluate_board(board)`
- **Input**: chess.Board object
- **Output**: Integer (centipawns)
- **Purpose**: Route to ML or traditional evaluation

### 5. Search Algorithm
- **Function**: `minimax(board, depth, alpha, beta, ai_color)`
- **Input**: Board state, search parameters
- **Output**: (score, best_move)
- **Purpose**: Find optimal move using minimax with Î±-Î² pruning

### 6. Move Selector
- **Function**: `best_move(board, depth, ai_color)`
- **Input**: Board state, search depth, AI color
- **Output**: chess.Move object
- **Purpose**: Return the best move for AI

### 7. UI Manager
- **Class**: `ChessApp`
- **Purpose**: Handle user interaction and display
- **Methods**: 
  - `_render_board()`: Update visual display
  - `_play_human_move()`: Process user moves
  - `on_start()`: Initialize new game
  - `on_undo()`: Take back moves

---

## ğŸ’¾ File Structure

```
Assignment 2/
â”‚
â”œâ”€â”€ archive/
â”‚   â””â”€â”€ chessData.csv              (13M positions)
â”‚
â”œâ”€â”€ Chess_Minimax.ipynb            (main application)
â”‚   â”œâ”€â”€ Cell 0: Package installation
â”‚   â”œâ”€â”€ Cell 1: Data loading
â”‚   â”œâ”€â”€ Cell 2: Feature extraction
â”‚   â”œâ”€â”€ Cell 3: Data preprocessing
â”‚   â”œâ”€â”€ Cell 4: Model architecture
â”‚   â”œâ”€â”€ Cell 5: Model training
â”‚   â”œâ”€â”€ Cell 6: Model evaluation
â”‚   â”œâ”€â”€ Cell 7: Model loading
â”‚   â”œâ”€â”€ Cell 8: Chess application
â”‚   â””â”€â”€ Cells 10-11: Testing
â”‚
â”œâ”€â”€ chess_eval_model.h5            (trained model, ~50MB)
â”œâ”€â”€ chess_eval_scaler.pkl          (feature scaler, ~10KB)
â”‚
â””â”€â”€ Documentation/
    â”œâ”€â”€ README.md
    â”œâ”€â”€ QUICK_START.md
    â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md
    â”œâ”€â”€ EXECUTION_INSTRUCTIONS.md
    â””â”€â”€ ARCHITECTURE.md            (this file)
```

---

## ğŸ¯ Design Principles

1. **Modularity**: Separate concerns (UI, engine, evaluation, ML)
2. **Fallback System**: Graceful degradation if ML unavailable
3. **Clean Interfaces**: Simple function signatures
4. **Error Handling**: Try-except blocks for robustness
5. **User Feedback**: Clear status messages and indicators
6. **Performance**: Efficient feature extraction and caching
7. **Extensibility**: Easy to add new evaluation methods

---

This architecture provides a robust, maintainable, and extensible chess application with machine learning integration.
